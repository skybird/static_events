<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title></title>
<style>
	body,html{
		margin: 0;
		padding: 0;
		height: 100%;
		overflow-y:hidden;
		overflow-x:hidden;
	}
	.first-page{
		width: 100%;
		height: 100%;
		-webkit-transition:all 3s;
    	transition: all 3s;
	}
	.bg-img{
		width: 100%;
		position: absolute;
	}
	.arrow{
		background-image:url("img/arrow.png"); 
		background-size: 100%;
		position: absolute;
		width: 109px;
		height: 149px;
		left: 0;
		right: 0;
		margin:83% auto;
	}
	.turntable{
		background-image:url("img/turntable.png"); 
		background-size: 100%;
		position: absolute;
		width: 296px;
		height: 296px;
		left: 0;
		right: 0;
		margin: 67% auto;
	}
	@media screen and (min-width: 966px) {
    	.turntable{
    		width: 594px;
			height: 594px;
    	}
    	.arrow{
			width: 218px;
			height: 298px;
    	}
  	}
	.input{
		position: absolute;
		z-index: 99;
	}
	.pages,.page{
		font-family: "Helvetica Neue",'Heiti SC','华文黑体', '黑体';
		height: 100%;
		min-height: 480px;
	}
	.page{
		float: left;
	}
	.pages{
		-webkit-transition:all 1.2s;
    	transition: all 1.2s;
	}
	.clearfix:after {
		content: ".";
		display: block;
		height: 0;
		clear: both;
		visibility: hidden;
	}
	.hidden{
		display: none !important;
	}
	
</style>

</head>

<body>
	<div class="first-page">
			<input class='input'>
			<img class="bg-img" src="img/bg.jpg">
			<div class="turntable"></div>
			<div class="arrow"></div>
	</div>
	<div class="pages clearfix hidden">
		<div class="page" data-page-index='1'>
			
		</div>
		<div class="page" data-page-index='2'>
			<div class="div2" style="background:red;width:100px;height:100px;"></div>
			2
		</div>
		<div class="page" data-page-index='3'>
			<div class="div3" style="background:blue;width:100px;height:100px;"></div>
			3
		</div>
		<div class="page" data-page-index='4'>
			<div class="div4" style="background:green;width:100px;height:100px;"></div>
			4
		</div>
		<div class="page" data-page-index='5'>
			<div class="div5" style="background:black;width:100px;height:100px;"></div>
			5
		</div>
	</div>
		
	
</body>
<script type="text/javascript" src="jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="jQueryRotate.2.2.js"></script>
<script type="text/javascript" src="jquery.easing.min.js"></script>
<script>
	$(function(){
		var canPlay=true;
		var showMessage;
		var pagesWidth=$('.pages').css({width:5*100+'%'});
		var pageWidth = 100/5;
		$(".page").css('width',pageWidth+'%');
		$(".arrow").rotate({
			bind:{
				click:function(){
					// var a = Math.floor(Math.random() * 360);
					if(canPlay==true){
						canPlay=false;
						var judgeDeg=$('.input').val();
						//1,2,3对应一二三等奖；0表示未抽中;-1表示没有抽奖机会
						switch(judgeDeg){
							case "1":
							  rotateDeg=15;
							  targetIndex=1;
							break;
							case "2":
							  rotateDeg=240;
							break;
							case "3":
							  rotateDeg=120;
							break;
							case "0":
							  rotateDeg=305;
							  targetIndex=2;
							break;
							case "-1":
							  rotateDeg=305;
							break;
							default:
							  rotateDeg=305;
						}
						$(".turntable").rotate({
						 	duration:800,
						 	angle: 0, 
	            			animateTo:3600+rotateDeg,
							easing: $.easing.easeOutSine,
							callback: function(){
								$('.pages').removeClass('hidden');
								$('.first-page').addClass('hidden');
								setTimeout(function(){
									movePage(targetIndex);
								},100)
								
							}
					 	});
					}else{
						return;
					}
					 
				}
			}
		});
		function movePage(targetIndex){
            var tranlateX = 'translateX(-'+ pageWidth*(targetIndex-1) +'%)';
            $('.pages').css('transform',tranlateX).css('background', 'pink');;
        }
		// function randomDeg(min,max){
		// 	Math.floor(Math.random()*(max-min))+min+1;
		// }
	});
</script>
</html>
